<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create a htaccess-like router in PHP built-in server</title>
    <meta name="description" content="">

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-75903757-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-75903757-1');
    </script>

    <style>
        body{font-size:1em;line-height:1.5;font-weight:400;font-family:Raleway,HelveticaNeue,"Helvetica Neue",Helvetica,Arial,sans-serif;color:#222;word-break:break-word;background-color:#ededed}#page{background-color:#fff;max-width:800px;margin-left:auto;margin-right:auto;padding:20px}@media (min-width:720px){#page{padding:20px 40px}}#page-footer{border-top:1px solid #dcdcdc;padding-top:10px;margin-top:10px}#page-header{display:grid;grid-template-columns:1fr;border-bottom:1px solid #dcdcdc;padding-bottom:10px;margin-bottom:10px}@media (min-width:720px){#page-header{grid-template-columns:1fr 2fr}}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:1rem;font-weight:300}h1{font-size:2.8rem;line-height:1.2;letter-spacing:-.1rem}h2{font-size:2.2rem;line-height:1.25;letter-spacing:-.1rem}h3{font-size:2rem;line-height:1.3;letter-spacing:-.1rem}h4{font-size:1.8rem;line-height:1.35;letter-spacing:-.08rem}h5{font-size:1.5rem;line-height:1.5;letter-spacing:-.05rem}h6{font-size:1.3rem;line-height:1.6;letter-spacing:0}p{margin-top:0;text-align:justify}a{color:maroon}code{padding:.2rem .5rem;white-space:nowrap;background:#f1f1f1;border:1px solid #e1e1e1;border-radius:4px;overflow:auto;margin-bottom:1rem}pre>code{display:block;padding:1rem 1.5rem;white-space:pre}.button{text-decoration:none;display:inline-block;border:1px solid #dcdcdc;text-align:center;line-height:1.5;padding:.25rem .5rem;font-size:.875rem;font-weight:400;border-radius:.2rem;color:#212529;background-color:#f8f9fa;margin:3px 6px 3px 0}.button-facebook{background-color:#4267b2;color:#fff}.button-twitter{background-color:#1da1f2;color:#fff}.button-whatsapp{background-color:#25d366;color:#fff}.center-flex{display:flex;align-items:center;justify-content:center}.text-nowrap{white-space:nowrap}.text-green{color:green;margin-top:5px;margin-bottom:5px}.text-red{color:red;margin-top:5px;margin-bottom:5px}.text-center{text-align:center}.img-fluid{max-width:100%}
    </style>

    


        

    </head>

<body>
    <div id="page">
        <header id="page-header">
            <div id="main-logo" class="center-flex">
                <a href="http://localhost:5000/" title="Webrosis"><img src="/assets/images/logo.jpg" class="img-fluid"></a>
            </div>

            <nav id="main-nav" class="center-flex">
                <a href="http://localhost:5000/" class="button button-yellow" class="button">Home</a>
                <a href="http://localhost:5000/category/coding" class="button button-yellow" class="button">Coding</a>
                <a href="http://localhost:5000/category/wordpress" class="button button-yellow" class="button">Wordpress</a>
            </nav>
        </header>        

        <main id="page-content">
            <article>
                
    <p><a href="http://localhost:5000/">Home</a> / <a href="http://localhost:5000/category/coding">coding</a> /</p>

    <h1>Create a htaccess-like router in PHP built-in server</h1>

    <p>Last Updated on: August 7, 2019</p>

    <p> 
                    <a href="http://localhost:5000/tag/php">php</a>
                    <a href="http://localhost:5000/tag/apache">apache</a>
                    <a href="http://localhost:5000/tag/htaccess">htaccess</a>
            </p>

    <p>While developing a project, PHP built-in server is much more flexible and easy to use compared to desktop setups like LAMP, XAMP, WAMP etc.</p>
<p>However, without Apache, you also lose the access to the magical and powerful .htaccess feature where you can create simple rewrite rules.</p>
<p>What if our application needs such rewrites like loading .html files for permalinks without extension?</p>
<p>Dont worry. PHP provides an excellent and simple solution for this as well. You can create your own router.php and call it while starting the server. Now, you are free to add any rewrite rule or any other condition to run your code.</p>
<p>To do this, create a file named router.php in your project root. You can choose any name for this file, but router.php provides the right context.</p>
<p>In this use case, I have a static website with all the static content like html, css etc. But my permalinks are without html extension, though the file name is same. I want to write a router which can rewrite my permalinks to .html version and at the same time, not mess us my style (.css) and script (.js) files.</p>
<p>Here is the code which I wrote for my particular use case. You can modify it to suit your own requirements.</p>
<pre><code class="language-php">// router.php

// Get the url path and trim leading slash
$url_path = trim( $_SERVER[ 'REQUEST_URI' ], '/' );

// If url_path is empty, it is root, so call index.html
if ( ! $url_path ) {
    include( 'index.html' );
    return;
}

// If url_path has no dot, it is a post permalink, so add .html extension
if( ! preg_match( '/[.]/', $url_path ) ) {
    include( $url_path . '.html' );
    return;
}

// In case of css files, add the appropriate header
if( preg_match( '/[.css]/', $url_path ) ) {
    header("Content-type: text/css");
    include( $url_path );
    // You can do the same for other file types as well
}</code></pre>
<p>Your router.php is ready. Now, open your terminal, go to the project root and start the php server with the following command.</p>
<pre><code>path\to\php.exe -S localhost:8000 router.php</code></pre>
<p>Finally, open your website by going to localhost:8000 on your browser. It works. Great.</p>
<p>Please note that this method is good for small applications so that you can quickly do a test run and check the code without deploying it on a proper server. In case of bigger applications, this setup may become complicated as it is difficult to scale.</p>

    <div>
        <div><strong>Share:</strong></div>

<a href="https://www.facebook.com/dialog/share?app_id=499291307487990&href=http://localhost:5000/php-built-in-server-router-like-htaccess" target="_blank" rel="noreferrer" title="Share on Facebook" class="button button-facebook">Facebook</a><a href="https://twitter.com/intent/tweet?url=http://localhost:5000/php-built-in-server-router-like-htaccess&text=Create a htaccess-like router in PHP built-in server&via=webrosis" target="_blank" rel="noreferrer" title="Share on Twitter" class="button button-twitter">Twitter</a><a href="whatsapp://send?text=http://localhost:5000/php-built-in-server-router-like-htaccess" target="_blank" rel="noreferrer" title="Share on Whatsapp" class="button button-whatsapp">Whatsapp</a>
    </div>

            </article>
        </main>

        <footer id="page-footer">        
            <div class="text-center">Copyright Â© 2019 Abhineet Mittal</div>

            <div class="text-center">
                <small>
                    <a href="http://localhost:5000/about">About</a> | 
                    <a href="http://localhost:5000/contact">Contact</a> | 
                    <a href="http://localhost:5000/terms-of-service">Terms of Service</a> | 
                    <a href="http://localhost:5000/privacy-policy">Privacy Policy</a>
                </small>
            </div>
        </footer>
    </div>

</body>

</html>