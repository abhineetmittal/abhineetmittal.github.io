<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create a htaccess-like router in PHP built-in server</title>

    
    <link rel="stylesheet" href="/assets/css/normalize.css" >
    <link rel="stylesheet" href="/assets/css/skeleton.css" >
    <link rel="stylesheet" href="/assets/css/style.css" >
</head>

<body>
    <div id="page">
        <header id="page-header">
            <div id="main-logo">
                <a href="/" title="Webrosis">Webrosis</a>
            </div>

            <nav id="main-nav">
                <a href="/" class="button button-yellow">Home</a>
            </nav>
        </header>

        

        <main id="page-content">

        
    <h1>Create a htaccess-like router in PHP built-in server</h1>

    <p>Last Updated on: August 7, 2019</p>

            <a href="/tag/php" class="button">PHP</a>
            <a href="/tag/apache" class="button">Apache</a>
            <a href="/tag/htaccess" class="button">htaccess</a>
            <a href="/tag/router" class="button">Router</a>
    
    <p>While developing a project, PHP built-in server is much more flexible and easy to use compared to desktop setups like LAMP, XAMP, WAMP etc.</p>
<p>However, without Apache, you also lose the access to the magical and powerful .htaccess feature where you can create simple rewrite rules.</p>
<p>What if our application needs such rewrites like loading .html files for permalinks without extension?</p>
<p>Dont worry. PHP provides an excellent and simple solution for this as well. You can create your own router.php and call it while starting the server. Now, you are free to add any rewrite rule or any other condition to run your code.</p>
<p>To do this, create a file named router.php in your project root. You can choose any name for this file, but router.php provides the right context.</p>
<p>In this use case, I have a static website with all the static content like html, css etc. But my permalinks are without html extension, though the file name is same. I want to write a router which can rewrite my permalinks to .html version and at the same time, not mess us my style (.css) and script (.js) files.</p>
<p>Here is the code which I wrote for my particular use case. You can modify it to suit your own requirements.</p>
<pre><code class="language-php">// router.php

// Get the url path and trim leading slash
$url_path = trim( $_SERVER[ 'REQUEST_URI' ], '/' );

// If url_path is empty, it is root, so call index.html
if ( ! $url_path ) {
    include( 'index.html' );
    return;
}

// If url_path has no dot, it is a post permalink, so add .html extension
if( ! preg_match( '/[.]/', $url_path ) ) {
        include( $url_path . '.html' );
        return;
}

// In case of css files, add the appropriate header
if( preg_match( '/[.css]/', $url_path ) ) {
    header("Content-type: text/css");
    include( $url_path );
    // You can do the same for other file types as well
}</code></pre>
<p>Your router.php is ready. Now, go to the project root and start the php server with the following command.</p>
<pre><code>path\to\php.exe -S localhost:8000 router.php</code></pre>
<p>Now, open your website by going to localhost:8000 on your browser. It works great.</p>
<p>Please note that this method is good for small applications so that you can quickly do a test run and check the code without deploying it on a proper server. In case of bigger applications, this setup may become complicated as it is difficult to scale.</p>
<p>If you like reading this article or if you know any other method for this, please do let me know in the comments section below.</p>


        </main>

        <footer id="page-footer">        
            <div class="text-center">Copyright Â© 2019 Abhineet Mittal</div>
        </footer>

</body>

</html>